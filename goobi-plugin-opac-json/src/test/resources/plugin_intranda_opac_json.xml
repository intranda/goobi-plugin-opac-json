<config_plugin>
	<config>
	
 <!-- Syntax: https://github.com/json-path/JsonPath#path-examples   -->

        <!-- check if field  /children/children/recordType with value 'item' exists -->
        <recordType field="$.children[0].children[0][?(@.recordType=='item')]" docType="Volume" anchorType="MultiVolumeWork"/>
        <!-- check if "recordType": "archival_object" exists -->
        <recordType field="[?(@.['recordType']=='archival_object')]" docType="Monograph" />

<!-- default publication type if it cannot be detected. If missing or empty, no record will be created -->
       <defaultPublicationType>Monograph</defaultPublicationType>

        <!-- 
        metadata : name of the field in ruleset
        field: path to the field
        regularExpression: regex to manipulate the value
        docType: volume or anchor        
         -->
		<metadata metadata="CatalogIDDigital" field="$.identifier" regularExpression="s/\/aspace\/repositories\/11\/archival_objects\/(.+)/$1/g" docType="volume"  />			
        <metadata metadata="TitleDocMain" field="$.title" />
        <metadata metadata="PublicationYear" field="$.date" />
        <metadata metadata="DocLanguage" field="$.language" />
        
        <!--  cut 'Eliot, George, 1819-1880' into first- and last name -->
        <person metadata="Author" field="creator" firstname="s/^(.+?)\, (.+?)\, (.+?)$/$2/g" lastname="s/^(.+?)\, (.+?)\, (.+?)$/$1/g" />
        
	</config>
</config_plugin>
